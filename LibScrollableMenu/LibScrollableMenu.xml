<GuiXml>
	<Controls>
		<!-- LSM_ListRowHighlightTemplate_SubmenuEntryWithCallback -->
        <Backdrop name="LSM_ListRowHighlightTemplate_SubmenuEntryWithCallback" virtual="true" blendMode="ADD">
            <AnchorFill/>
            <Edge file="EsoUI/Art/Miscellaneous/highlightOverlay_edge_8.dds" edgeFileWidth="64" edgeFileHeight="8" />
            <Center file="EsoUI/Art/Miscellaneous/highlightOverlay_center.dds" />
            <Insets left="20" top="8" right="-20" bottom="-8" />
			<OnInitialized>
                self:SetCenterColor(0, 0, 0.8, 0)
            </OnInitialized>
        </Backdrop>



		<Control name="LibScrollableMenu_Entry_Behavior" mouseEnabled="true" virtual="true">
			<OnMouseEnter name="BaseHandler">
				local dropdown = self.m_dropdownObject
				if dropdown then
					dropdown:OnMouseEnterEntry(self)
				end
			</OnMouseEnter>
			
			<OnMouseExit name="BaseHandler">
				local dropdown = self.m_dropdownObject
				if dropdown then
					dropdown:OnMouseExitEntry(self)
				end
			</OnMouseExit>
			
			<OnMouseUp name="BaseHandler">
				local dropdown = self.m_dropdownObject
				if dropdown then
					dropdown:OnEntrySelected(self, button, upInside)
				end
			</OnMouseUp>
		</Control>

		<!-- Base row template with Multi-Icon -->
		<Control name="LibScrollableMenu_IconEntry_Template" virtual="true">
			<Anchor point="LEFT" offsetX="8" offsetY="0" />
			<Dimensions y="6" />
			<Controls>
				<Control name="$(parent)IconContainer">
					<Dimensions x="25"  y="25"/>
					<Anchor point="TOPLEFT" offsetX="0" offsetY="0"/>
					<Anchor point="BOTTOMLEFT" offsetY="-4" />
					<Controls>
						<Texture name="$(parent)Icon" inherits="ZO_MultiIcon">
							<!--Dimensions x="25"  y="25"/>
							<Anchor point="CENTER"/-->
							
							<Anchor point="TOPLEFT"/>
							<Anchor point="BOTTOMRIGHT"/>
							
							<OnMouseEnter name="ZO_PropagateMouseOverBehavior">
								ZO_PropagateHandlerToNearestAncestor("OnMouseEnter", ...)
							</OnMouseEnter>

							<OnMouseExit name="ZO_PropagateMouseOverBehavior">
								ZO_PropagateHandlerToNearestAncestor("OnMouseExit", ...)
							</OnMouseExit>
						</Texture>
					</Controls>
				</Control>
			</Controls>
		</Control>

		<Control name="LibScrollableMenu_ComboBoxEntry_Base" inherits="LibScrollableMenu_Entry_Behavior LibScrollableMenu_IconEntry_Template" virtual="true" />

		<!-- Row templates -->
		<!-- Divider | no icon no handlers -->
		<Control name="LibScrollableMenu_ComboBoxDividerEntry" inherits="LibScrollableMenu_Entry_Behavior" virtual="true">
			<Dimensions y="6" />
			<Controls>
				<Texture name="$(parent)Divider" hidden="false" inherits="ZO_BaseTooltipDivider">
					<Anchor point="LEFT" offsetX="-0" offsetY="-2.5" />
					<Anchor point="RIGHT" offsetX="0" offsetY="2.5" />
				</Texture>
			</Controls>
		</Control>

		<!-- Header | no handlers-->
		<Control name="LibScrollableMenu_ComboBoxHeaderEntry" inherits="LibScrollableMenu_ComboBoxEntry_Base" mouseEnabled="true" virtual="true">
			<Dimensions y="25" />
			<OnInitialized>
				self.isHeader = true
			</OnInitialized>

			<Controls>
				<Label name="$(parent)Label" verticalAlignment="CENTER" font="ZoFontWinH5" color="INTERFACE_COLOR_TYPE_TEXT_COLORS:INTERFACE_TEXT_CONTEXT_HIGHLIGHT" maxLineCount="1">
					<Anchor point="TOPLEFT" relativeTo="$(parent)IconContainer" relativePoint="TOPRIGHT" offsetX="0" />
					<Anchor point="BOTTOMRIGHT" offsetX="ZO_COMBO_BOX_ENTRY_TEMPLATE_LABEL_PADDING" offsetY="-5"  />
				</Label>
				<!-- ZoFontWinH5 inherits="ZO_HorizontalDivider" inherits="ZO_WideHorizontalDivider" offsetY="4" -->
				<Texture name="$(parent)Divider" inherits="ZO_Options_Divider">
					<Anchor point="BOTTOMLEFT" offsetX="3" offsetY="-5"/>
					<Anchor point="BOTTOMRIGHT" offsetX="0" offsetY="0" />
				</Texture>
			</Controls>
		</Control>

		<!-- Normal entry -->
		<Control name="LibScrollableMenu_ComboBoxEntry" inherits="ZO_ComboBoxEntry LibScrollableMenu_ComboBoxEntry_Base" mouseEnabled="true" virtual="true">
			<Dimensions y="ZO_COMBO_BOX_ENTRY_TEMPLATE_HEIGHT" />
			<OnInitialized>
				<!-- Is this still needed? -->
				self.selectable = true <!-- Denotes this is a selectable entry.   -->
			</OnInitialized>

			<Controls>
				<Label name="$(parent)Label" verticalAlignment="CENTER" override="true" wrapMode="ELLIPSIS" maxLineCount="1">
					<Anchor point="TOPLEFT" relativeTo="$(parent)IconContainer" relativePoint="TOPRIGHT" offsetX="1" />
					<Anchor point="RIGHT" offsetX="ZO_COMBO_BOX_ENTRY_TEMPLATE_LABEL_PADDING" />
				</Label>
			</Controls>
		</Control>

		<!-- Checkbox -->
		<Control name="LibScrollableMenu_ComboBoxCheckboxEntry" inherits="LibScrollableMenu_ComboBoxEntry" mouseEnabled="true" virtual="true">
			<Dimensions y="25" />

			<OnInitialized>
				self.Checkbox = self:GetNamedChild('Checkbox')
				self.selectible = true <!-- Denotes this is a selectible entry.   -->
			</OnInitialized>
			
			<Controls>
				<Button name="$(parent)Checkbox" inherits="ZO_CheckButton" level="2">
					<!-- Centered on the icon -->
					<OnMouseEnter name="ZO_PropagateMouseOverBehavior">
						ZO_PropagateHandlerToNearestAncestor("OnMouseEnter", ...)
					</OnMouseEnter>

					<OnMouseExit name="ZO_PropagateMouseOverBehavior">
						ZO_PropagateHandlerToNearestAncestor("OnMouseExit", ...)
					</OnMouseExit>
					<Anchor point="LEFT" relativeTo="$(parent)IconContainer" relativePoint="RIGHT" offsetX="1"/>
				</Button>
				<Label name="$(parent)Label" verticalAlignment="CENTER" override="true" wrapMode="ELLIPSIS" maxLineCount="1">
					<Anchor point="LEFT" relativeTo="$(parent)Checkbox" relativePoint="RIGHT" offsetX="4"/>
					<Anchor point="RIGHT" offsetX="-25" />
				</Label>
			</Controls>
		</Control>

		<!-- Submenu -->
		<Control name="LibScrollableMenu_ComboBoxSubmenuEntry" inherits="LibScrollableMenu_ComboBoxEntry" mouseEnabled="true" virtual="true">
			<OnInitialized>
				<!-- Is this still needed? -->
				self.selectable = true <!-- Denotes this is a selectable entry.   -->
			</OnInitialized>
			<Controls>
				<Label name="$(parent)Label" verticalAlignment="CENTER" override="true" wrapMode="ELLIPSIS" maxLineCount="1">
					<Anchor point="TOPLEFT" relativeTo="$(parent)IconContainer" relativePoint="TOPRIGHT" offsetX="1" />
					<Anchor point="RIGHT" offsetX="-25" />
				</Label>
				<Texture name="$(parent)Arrow" textureFile="EsoUI/Art/Miscellaneous/colorPicker_slider_vertical.dds">
					<TextureCoords left="0" right="0.5" top="0" bottom="1"/>
					<Dimensions x="16"  y="20"/>
					<Anchor point="LEFT" relativeTo="$(parent)Label" relativePoint="RIGHT" offsetY="0"/>
				</Texture>
			</Controls>
		</Control>

		<!-- The genuine Dropdown control. The scroll list container.
			TLC so it can be forced above other dropdowns without having to consider layering
			Since some UI panels have layering set, we set it as overlay high, so it will be above those
		-->
		<TopLevelControl name="LibScrollableMenu_Keyboard_Template" inherits="ZO_ComboBoxDropdown_Keyboard_Template" virtual="true">
			<!--Anchor point="TOPLEFT" relativePoint="BOTTOMLEFT" /-->
			<!-- Width will be set programmatically -->
			<OnInitialized>
				-- Overwritten to prevent original OnInitialized
			</OnInitialized>
			
			<OnEffectivelyShown name="BringToTop">
				self:BringWindowToTop()
			</OnEffectivelyShown>

			<OnEffectivelyHidden name="HideDropdown" >
				if self.object then
					self.object:HideDropdown()
				end
			</OnEffectivelyHidden>
	
			<OnMouseEnter name="CloseCheck">
				if self.object then
					self.object:OnMouseExitTimeout(self)
				end
			</OnMouseEnter>
		</TopLevelControl>
		
		<!-- ZO_ComboBox -->
		<Control name="LibScrollableMenu_ComboBox_Behavior" virtual="true">
			<OnMouseEnter name="Narrate">
				if self.m_comboBox then
					self.m_comboBox.m_dropdownObject:Narrate("OnComboBoxMouseEnter", self, nil, nil)
				end
			</OnMouseEnter>
			
			<OnMouseExit name="Narrate">
				if self.m_comboBox then
					self.m_comboBox.m_dropdownObject:Narrate("OnComboBoxMouseExit", self, nil, nil)
				end
			</OnMouseExit>
		</Control>

		<!-- Scrollbar padding -->
		<!-- used when scrollbar is hidden -->
		<Control name="LibScrollableMenu_ScrollContents_BarHidden" virtual="true">
			<Anchor point="TOPLEFT" />
			<Anchor point="BOTTOMRIGHT"/>
		</Control>
		<!-- used when scrollbar is shown -->
		<Control name="LibScrollableMenu_ScrollContents_BarShown" virtual="true">
			<Anchor point="TOPLEFT" />
			<Anchor point="BOTTOMRIGHT" offsetX="-ZO_SCROLL_BAR_WIDTH" />
		</Control>
	</Controls>
</GuiXml>
